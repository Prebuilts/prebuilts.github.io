<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Article</title>
<link rel="stylesheet" href="article-style.css">
</head>
<body>

<main id="article" class="article-container"></main>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
import { getFirestore, doc, getDoc } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";

const app = initializeApp({
  apiKey:"AIzaSyBkbXzURYKixz4R28OYMUOueA9ysG3Q1Lo",
  projectId:"prebuiltid-website"
});
const db = getFirestore(app);

const id = new URLSearchParams(location.search).get("id");
const snap = await getDoc(doc(db,"articles",id));

if (!snap.exists()) {
  article.innerHTML = "<h2>Not found</h2>";
} else {
  const a = snap.data();
  article.innerHTML = `
    <h1 class="article-title">${a.title}</h1>
    <div class="article-meta">${a.meta}</div>
    ${a.sections.map(s=>`
      <h2>${s.heading}</h2>
      <p>${s.content}</p>
    `).join("")}
    <div class="article-divider">${a.takeaway}</div>
  `;
}
</script>
</body>
</html>
